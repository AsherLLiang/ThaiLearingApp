# 冻结文档｜发音还原（Pronunciation Restoration）功能规范 v1.0

（本文件承接前文设计背景、功能边界、流水线与对接规范）

---

## 9. 典型示例（冻结参考）

> 以下示例用于**行为冻结**，不是教学示例  
> 后续实现必须与这些示例在规则版本一致的情况下输出相同结果

### 9.1 单音节

| 输入 | 输出（Thai） | 说明 |
|----|----|----|
| กา | กา | 第一调，不标 |
| จะ | จ่ะ | 实际为第二调 |
| โต๊ะ | โต๊ะ | 第四调，保留 |
| ใหม่ | ใหม่ | 拼写有 ่，但实际第一调，不标 |

### 9.2 多音节

| 输入 | 输出（Thai） |
|----|----|
| ภาษาไทย | พา สา ไท |
| ประเทศ | ปฺระ เทด |
| เข้าใจ | เข้า ใจ |
| ทราบ | ซ้าบ |

### 9.3 含假复辅音

| 输入 | 输出（Thai） |
|----|----|
| ทราย | ซ้าย |
| ทราบ | ซ้าบ |

---

## 10. 异常与例外策略（冻结）

### 10.1 原则
- **规则优先，词表兜底**
- 任何无法仅通过 `pron_thai.json` 决定的行为：
  - 必须进入 exception 词表
  - 不允许在代码中 hardcode 语言直觉

### 10.2 Exception 词表建议
- 文件形式：`pron_thai.exceptions.jsonl`
- 每行一个词条，包含：
  - word
  - syllable_override（可选）
  - tone_override（可选）
  - note（仅说明，不参与执行）

---

## 11. 变更与扩展约束（非常重要）

### 11.1 允许的变更
- 增加 exception 词条
- 增加测试用例
- 优化性能（不改变结果）

### 11.2 禁止的变更
- 修改既有规则语义
- 引入“语言直觉”规则
- 为某些词“临时特殊处理”而不入词表
- 改变声调显式策略（T1 不标）

---

## 12. 冻结声明（Final）

自本文件发布之日起：

- **“发音还原（Pronunciation Restoration）”功能的设计目标、边界、输出形式、规则来源与执行流水线全部冻结**
- 后续开发必须：
  - 以 `pron_thai.json` 为唯一规则源
  - 遵循项目既有脚手架与模块分层
  - 不将该功能实现为孤立 demo
- 若未来需要扩展（如 IPA、方言、TTS），必须：
  - 新增独立模块
  - 不破坏本功能的既有行为

> 本冻结文档的目标不是“做得最少”，  
> 而是 **保证系统在整个生命周期内：  
> 可控、可追溯、可持续、不失真。**
